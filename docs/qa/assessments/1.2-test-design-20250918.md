# Test Design: Story 1.2

Date: 2025-09-18
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 6
- Unit tests: 6 (100%)
- Integration tests: 0 (0%)
- E2E tests: 0 (0%)
- Priority distribution: P0: 5, P1: 1, P2+: 0

## Test Scenarios by Acceptance Criteria

### AC1 – `health_check` tool
| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.2-UNIT-001 | Unit | P0 | Validate payload includes server metadata, environment summary, browser and LLM sections | Ensures core diagnostic aggregation works without MCP transport |

### AC2 – `validate_dependencies`
| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.2-UNIT-002 | Unit | P0 | Stub Playwright checker to return missing browsers, assert remediation guidance | Guards actionable dependency output |

### AC3 – `test_llm_connectivity`
| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.2-UNIT-003 | Unit | P0 | Simulate missing API keys to ensure missing_key status emitted | Verifies graceful handling when credentials absent |
| 1.2-UNIT-004 | Unit | P1 | Stub successful probe to confirm OK status and HTTP code surfaced | Confirms positive path |

### AC4 – `system_status` resource
| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.2-UNIT-005 | Unit | P0 | Snapshot collector returns timestamp, platform info, and active task count | Validates metrics captured |
| 1.2-UNIT-006 | Unit | P0 | Server registration exposes resource template `/system/status/{scope}` | Ensures clients can discover resource |

## Coverage Gaps
- Missing P0 scenario for env validation failure path (AC5/AC6) – add test ensuring remediation list returned when keys absent.
- No integration/E2E smoke invoking tools through FastMCP transport; consider add once env bug fixed.

## Recommended Execution Order
1. P0 unit tests (1.2-UNIT-001 → 1.2-UNIT-006)
2. Future integration/E2E once configuration bug resolved.

---

Test design matrix: docs/qa/assessments/1.2-test-design-20250918.md
