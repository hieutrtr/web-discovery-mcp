# Test Design: Story 1.3

Date: 2025-09-19
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 7
- Unit tests: 6 (86%)
- Integration tests: 1 (14%)
- E2E tests: 0 (0%)
- Priority distribution: P0: 5, P1: 2

## Test Scenarios by Acceptance Criteria

### AC1 & AC2 – Environment variables & configuration model
| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.3-UNIT-001 | Unit | P0 | `MCPSettings` loads required env vars with type validation | Ensures primary configuration object handles secrets properly |
| 1.3-UNIT-002 | Unit | P0 | `validate_env_vars` + `summarize_env_validation` return remediation for missing keys | Guarantees env validator supports diagnostics and AC5 |
| 1.3-UNIT-003 | Unit | P1 | `.env` precedence over defaults | Confirms optional env file merge |

### AC2 & AC5 – Config file parsing & defaults
| ID | Level | Priority | Test |
|----|-------|----------|------|
| 1.3-UNIT-004 | Unit | P0 | YAML/JSON override loader updates defaults | Verifies fallback to config/default.yaml |
| 1.3-INTEGRATION-001 | Integration | P1 | Load configuration & show redacted output via MCP tool | Asserts end-to-end redaction and merging |

### AC3 – `show_config` tool
| ID | Level | Priority | Test |
|----|-------|----------|------|
| 1.3-UNIT-005 | Unit | P0 | `show_config` returns sanitized JSON (no secrets) | Confirms tool behaviour for developer inspection |

### AC4 – Validation surfaced in diagnostics
| ID | Level | Priority | Test |
|----|-------|----------|------|
| 1.3-UNIT-006 | Unit | P0 | Health check with missing env uses validator output without exceptions | Validates integration between config validator and diagnostics |

### AC6 – Documentation
| ID | Level | Priority | Test |
|----|-------|----------|------|
| 1.3-DOC-001 | Doc Review | P1 | README updated with config usage instructions | Manual review to ensure doc completeness |

## Coverage Gaps
- No end-to-end test verifying show_config output through stdio transport; acceptable for now.

## Recommended Execution Order
1. P0 unit tests (1.3-UNIT-001 → 1.3-UNIT-006)
2. Integration check (1.3-INTEGRATION-001)
3. Documentation verification (1.3-DOC-001)

---

Test design matrix: docs/qa/assessments/1.3-test-design-20250919.md
