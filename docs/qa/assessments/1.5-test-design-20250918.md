# Test Design: Story 1.5

Date: 2025-09-18
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 12
- Unit tests: 5 (42%)
- Integration tests: 6 (50%)
- E2E tests: 1 (8%)
- Priority distribution: P0: 7, P1: 4, P2: 1, P3: 0

## Test Scenarios by Acceptance Criteria

### AC1 & AC2: Project folder creation with standardized substructure

| ID             | Level       | Priority | Test                                                                                     | Justification |
| -------------- | ----------- | -------- | ---------------------------------------------------------------------------------------- | ------------- |
| 1.5-UNIT-001   | Unit        | P0       | Generate project identifier from domain + timestamp (timezone handling, sanitization)   | Pure deterministic logic |
| 1.5-INT-001    | Integration | P0       | Initialize project directory tree and assert subfolders `/discovery`, `/analysis`, `/reports` | Validates filesystem interaction and naming convention |

### AC3: URL inventory persisted as structured JSON/YAML

| ID             | Level       | Priority | Test                                                                                     | Justification |
| -------------- | ----------- | -------- | ---------------------------------------------------------------------------------------- | ------------- |
| 1.5-UNIT-002   | Unit        | P0       | Serialize inventory data model; verify schema includes URL, title, description, complexity | Data transformation logic |
| 1.5-INT-002    | Integration | P0       | Write discovery results to disk and reload to ensure round-trip fidelity                  | Ensures storage abstraction works end-to-end |

### AC4: Metadata tracking (timestamps, configuration snapshot, counts)

| ID             | Level       | Priority | Justification |
| -------------- | ----------- | -------- | ------------- |
| 1.5-UNIT-003   | Unit        | P0       | Build metadata object capturing config and counters; validate default values              | Ensures correctness of metadata composition |
| 1.5-INT-003    | Integration | P1       | Persist metadata file alongside inventory; verify contents match runtime inputs           | Filesystem + serialization interaction |

### AC5: Project listing for resume workflow

| ID             | Level       | Priority | Test                                                                                     | Justification |
| -------------- | ----------- | -------- | ---------------------------------------------------------------------------------------- | ------------- |
| 1.5-UNIT-004   | Unit        | P1       | List projects utility sorts by timestamp and filters invalid directories                  | Pure logic, no side effects |
| 1.5-INT-004    | Integration | P1       | Invoke listing against temp root with multiple projects; confirm metadata aggregation     | Validates detection pipeline over filesystem |

### AC6: Cleanup utilities with safeguards

| ID             | Level       | Priority | Test                                                                                     | Justification |
| -------------- | ----------- | -------- | ---------------------------------------------------------------------------------------- | ------------- |
| 1.5-UNIT-005   | Unit        | P0       | Confirmation prompt logic requires explicit acknowledgment before deletion                | Safety-critical logic |
| 1.5-INT-005    | Integration | P1       | Cleanup command archives/deletes project directories with dry-run + confirmation steps    | Filesystem side effects need integration coverage |

### Cross-cutting Reliability & Workflow Confidence

| ID             | Level | Priority | Test                                                                                     | Justification |
| -------------- | ----- | -------- | ---------------------------------------------------------------------------------------- | ------------- |
| 1.5-INT-006    | Integration | P0 | Combine discovery output from Story 1.4 into project structure ensuring inventory + metadata placement | Validates cross-story contract, ensuring API compatibility |
| 1.5-E2E-001    | E2E   | P1       | Execute full workflow: initialize project, persist inventory/metadata, list projects, perform cleanup | Confirms user journey end-to-end |
| 1.5-INT-007    | Integration | P2 | Verify cleanup respects retention policies (e.g., keep latest N projects)                | Lower risk but important for operational usability |

## Risk Coverage

- P0 scenarios focus on data integrity (inventory, metadata), automation safety (cleanup confirmation), and filesystem structure consistency.
- Integration tests ensure interactions with Story 1.4 outputs remain compatible, reducing cross-story regression risk.
- E2E test validates end-user workflow from creation through cleanup.

## Recommended Execution Order

1. P0 unit tests (1.5-UNIT-001 â†’ 1.5-UNIT-005)
2. P0/P1 integration tests (1.5-INT-001, 1.5-INT-002, 1.5-INT-003, 1.5-INT-004, 1.5-INT-005, 1.5-INT-006)
3. E2E flow (1.5-E2E-001)
4. Retention/cleanup policy validation (1.5-INT-007)

## Gate Summary

```yaml
test_design:
  scenarios_total: 12
  by_level:
    unit: 5
    integration: 6
    e2e: 1
  by_priority:
    p0: 7
    p1: 4
    p2: 1
    p3: 0
  coverage_gaps: []
```

## Trace References

Test design matrix: docs/qa/assessments/1.5-test-design-20250918.md
P0 tests identified: 7
